(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(38)},27:function(e,t,a){},28:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),o=a.n(i),c=(a(27),a(28),a(1)),s=a(11),l=a(18),u=a(2),m=function(e,t){return{type:"RATE_MOVIE",id:e,rating:t}},d=function(e,t){return function(a){return a(function(e){return{type:"REQUEST_MOVIES",searchString:e}}(e)),fetch("http://www.omdbapi.com/?s=".concat(e,"&type=movie&page=").concat(t,"&apikey=").concat("edd80908")).then(function(e){return e.json()}).then(function(e){return a({type:"RECEIVE_MOVIES",response:e})})}},p=function(e){return function(t){return t(function(e){return{type:"REQUEST_MOVIE_DETAILS",id:e}}(e)),fetch("http://www.omdbapi.com/?i=".concat(e,"&apikey=").concat("edd80908")).then(function(e){return e.json()}).then(function(e){return t({type:"RECEIVE_MOVIE_DETAILS",response:e})})}},v=a(9),h={searchString:"",movies:[],totalResults:0,currentPage:0,isLoadingMovies:!1,error:""},g=Object(v.c)({movieList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_MOVIES":return console.log("req",t),e.searchString!==t.searchString?Object(u.a)({},e,{isLoadingMovies:!0,movies:[],searchString:t.searchString,currentPage:0}):Object(u.a)({},e,{isLoadingMovies:!0,searchString:t.searchString});case"RECEIVE_MOVIES":return"True"===t.response.Response?Object(u.a)({},e,{totalResults:t.response.totalResults,isLoadingMovies:!1,currentPage:++e.currentPage,error:"",movies:[].concat(Object(l.a)(e.movies),Object(l.a)(t.response.Search))}):Object(u.a)({},e,{isLoadingMovies:!1,error:t.response.Error});default:return e}},movieDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_MOVIE_DETAILS":return Object(u.a)({},e,Object(s.a)({},t.id,{isLoadingDetails:!0,MRRating:0}));case"RECEIVE_MOVIE_DETAILS":return Object(u.a)({},e,Object(s.a)({},t.response.imdbID,Object(u.a)({},e[t.response.imdbID],t.response,{isLoadingDetails:!1})));case"RATE_MOVIE":return Object(u.a)({},e,Object(s.a)({},t.id,Object(u.a)({},e[t.id],{MRRating:t.rating})));default:return e}}}),E=a(21),f=a(4),O=a(5),b=a(7),j=a(6),w=a(8),S=a(13),y=a.n(S),R=(a(33),function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(b.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleChange=y()(function(e){e.target.value&&a.props.dispatch(d(e.target.value,1))},250),a}return Object(w.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container search"},r.a.createElement("input",{className:"search-input",type:"text",onChange:function(t){t.persist(),e.handleChange(t)},placeholder:"Searh a movie"}))}}]),t}(r.a.Component)),L=Object(c.b)()(R),I=(a(34),function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(b.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).rate=function(e){a.props.dispatch(m(a.props.id,e))},a}return Object(w.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,a=t.rating,n=(t.id,[]),i=function(t){n.push(r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{key:t,type:"radio",id:"star"+t,name:"rate",value:t,defaultChecked:a<=t&&a>0}),r.a.createElement("label",{key:"label"+t,htmlFor:"star"+t,title:"text",onClick:function(){e.rate(t)},className:a>=t&&a>0?"star checked":"star"})))},o=5;o>0;o--)i(o);return r.a.createElement("div",null,r.a.createElement("div",{className:"rate"},n))}}]),t}(r.a.Component)),M=Object(c.b)(function(e,t){return{rating:e.movieDetails[t.id].MRRating}})(I),N=(a(35),function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(b.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).getDetails=function(e){a.props.movie||a.props.dispatch(p(e))},a}return Object(w.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.poster,n=t.id,i=t.movie;return r.a.createElement("div",{className:"movie"},r.a.createElement("div",{className:"movie-poster",onMouseOver:function(){e.getDetails(n)}},r.a.createElement("img",{src:"N/A"===a?"https://placeimg.com/300/447/any":a,alt:n})),i&&!i.isLoadingDetails&&r.a.createElement("div",{className:"movie-details"},r.a.createElement("div",{className:"movie-details-title"},i.Title),r.a.createElement("div",{className:"movie-details-year"},i.Year),r.a.createElement("div",{className:"movie-details-cast"},i.Actors),r.a.createElement("div",{className:"movie-details-imdb_rating"},"IMDB : ",i.imdbRating),r.a.createElement("div",{className:"movie-details-rating"},r.a.createElement(M,{id:n}))),i&&i.isLoadingDetails&&r.a.createElement("div",{className:"movie-loader"},r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-spinner fa-spin loader"}))))}}]),t}(r.a.Component)),_=Object(c.b)(function(e,t){return{movie:e.movieDetails[t.id]}})(N),D=(a(36),function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(j.a)(t).call(this,e))).handleScroll=y()(function(){if(console.log("onscroll"),window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&a.props.movies.length!==+a.props.totalResults){console.log("onscroll inside");var e=a.props.currentPage+1;a.props.dispatch(d(a.props.searchString,e))}},250),a.currentPage=1,window.onscroll=a.handleScroll,a}return Object(w.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.movies,a=e.error,n=e.totalResults,i=e.isLoadingMovies;return console.log(i),r.a.createElement("div",{className:"movie-list"},t.map(function(e,t){return r.a.createElement(_,{key:t,poster:e.Poster,id:e.imdbID})}),a&&r.a.createElement("div",{className:"message"},a),t.length>0&&t.length===+n&&r.a.createElement("div",{className:"message"},"Thats all we have!"),i&&r.a.createElement("div",{className:"message"},"Loading..."))}}]),t}(r.a.Component)),k=Object(c.b)(function(e){return{searchString:e.movieList.searchString,movies:e.movieList.movies,totalResults:e.movieList.totalResults,error:e.movieList.error,isLoadingMovies:e.movieList.isLoadingMovies,currentPage:e.movieList.currentPage}})(D),T=(a(37),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d),V=Object(v.e)(g,T(Object(v.a)(E.a)));var C=function(){return r.a.createElement(c.a,{store:V},r.a.createElement("div",{className:"app"},r.a.createElement(L,null),r.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.c27154ad.chunk.js.map